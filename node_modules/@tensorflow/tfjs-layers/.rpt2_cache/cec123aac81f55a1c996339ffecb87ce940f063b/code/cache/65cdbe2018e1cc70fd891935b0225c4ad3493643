{"code":"import * as tfc from '@tensorflow/tfjs-core';\r\nimport { dispose, onesLike as coreOnesLike, scalar, Tensor, tensor1d, tensor2d, tidy, util, variableGrads, where, zerosLike as coreZerosLike } from '@tensorflow/tfjs-core';\r\nimport { checkDataFormat, nameScope as commonNameScope } from '../common';\r\nimport { NotImplementedError, ValueError } from '../errors';\r\nimport * as math_utils from '../utils/math_utils';\r\nimport { LayerVariable } from '../variables';\r\nimport { epsilon as common_epsilon } from './common';\r\nimport { imageDataFormat } from './common';\r\nvar backend = 'webgl';\r\nvar DEFAULT_DTYPE = 'float32';\r\nexport function disposeScalarCache() {\r\n    for (var typeKey in scalarCache) {\r\n        for (var key in scalarCache[typeKey]) {\r\n            scalarCache[typeKey][key].dispose();\r\n            delete scalarCache[typeKey][key];\r\n        }\r\n    }\r\n}\r\nexport function setBackend(requestedBackend) {\r\n    tfc.setBackend(requestedBackend);\r\n    backend = requestedBackend;\r\n    disposeScalarCache();\r\n}\r\nexport function getBackend() {\r\n    return backend;\r\n}\r\nvar scalarCache = {\r\n    float32: {},\r\n    int32: {}\r\n};\r\nexport function getScalar(value, dtype) {\r\n    if (dtype === undefined) {\r\n        dtype = DEFAULT_DTYPE;\r\n    }\r\n    if (scalarCache[dtype][value] == null) {\r\n        scalarCache[dtype][value] = scalar(value, dtype);\r\n        tfc.keep(scalarCache[dtype][value]);\r\n    }\r\n    return scalarCache[dtype][value];\r\n}\r\nexport var epsilon = common_epsilon;\r\nexport function isBackendSymbolic() {\r\n    return false;\r\n}\r\nexport function shape(x) {\r\n    return x.shape;\r\n}\r\nexport function intShape(x) {\r\n    return x.shape;\r\n}\r\nexport function dtype(x) {\r\n    return (x instanceof Tensor) ? DEFAULT_DTYPE : x.dtype;\r\n}\r\nexport function countParams(x) {\r\n    var shape = x.shape;\r\n    if (shape.length > 0) {\r\n        return shape.reduce(function (a, b) { return a * b; });\r\n    }\r\n    else {\r\n        return 1;\r\n    }\r\n}\r\nexport function cast(x, dtype) {\r\n    return x.asType(dtype);\r\n}\r\nexport function expandDims(x, axis) {\r\n    if (axis === void 0) { axis = -1; }\r\n    var outShape = shape(x).slice();\r\n    if (axis < 0) {\r\n        axis = outShape.length + axis + 1;\r\n    }\r\n    outShape.splice(axis, 0, 1);\r\n    return x.reshape(outShape);\r\n}\r\nexport function repeat(x, n) {\r\n    return tidy(function () {\r\n        if (x.shape.length !== 2) {\r\n            throw new ValueError(\"repeat() expects a rank-2 tensor, but received a \" +\r\n                (\"rank-\" + x.shape.length + \" tensor.\"));\r\n        }\r\n        var y = expandDims(x, 1);\r\n        return tile(y, [1, n, 1]);\r\n    });\r\n}\r\nexport function flatten(x) {\r\n    var newShape = [math_utils.arrayProd(x.shape)];\r\n    return x.reshape(newShape);\r\n}\r\nexport function batchFlatten(x) {\r\n    if (x.rank <= 1) {\r\n        throw new ValueError(\"batchFlatten requires a minimum rank of 2. Got rank: \" + x.rank + \".\");\r\n    }\r\n    var newShape = [x.shape[0], math_utils.arrayProd(x.shape, 1)];\r\n    return x.reshape(newShape);\r\n}\r\nexport function sliceAlongFirstAxis(array, start, size) {\r\n    return tidy(function () {\r\n        switch (array.rank) {\r\n            case 1:\r\n                return tfc.slice1d(array, start, size);\r\n            case 2:\r\n                return tfc.slice2d(array, [start, 0], [size, array.shape[1]]);\r\n            case 3:\r\n                return tfc.slice3d(array, [start, 0, 0], [size, array.shape[1], array.shape[2]]);\r\n            case 4:\r\n                return tfc.slice4d(array, [start, 0, 0, 0], [size, array.shape[1], array.shape[2], array.shape[3]]);\r\n            default:\r\n                throw new ValueError(\"sliceAlongFirstAxis() received an unsupported tensor rank: \" +\r\n                    (\"\" + array.rank));\r\n        }\r\n    });\r\n}\r\nexport function sliceAlongLastAxis(array, start, size) {\r\n    return tidy(function () {\r\n        switch (array.rank) {\r\n            case 1:\r\n                return tfc.slice1d(array, start, size);\r\n            case 2:\r\n                return tfc.slice2d(array, [0, start], [array.shape[0], size]);\r\n            case 3:\r\n                return tfc.slice3d(array, [0, 0, start], [array.shape[0], array.shape[1], size]);\r\n            case 4:\r\n                return tfc.slice4d(array, [0, 0, 0, start], [array.shape[0], array.shape[1], array.shape[2], size]);\r\n            default:\r\n                throw new ValueError(\"sliceAlongLastAxis() received an unsupported tensor rank: \" +\r\n                    (\"\" + array.rank));\r\n        }\r\n    });\r\n}\r\nexport function sliceAlongAxis(array, start, size, axis) {\r\n    return tidy(function () {\r\n        switch (array.rank) {\r\n            case 1:\r\n                return tfc.slice1d(array, start, size);\r\n            case 2:\r\n                switch (axis) {\r\n                    case 1:\r\n                        return sliceAlongFirstAxis(array, start, size);\r\n                    case 2:\r\n                        return sliceAlongLastAxis(array, start, size);\r\n                    default:\r\n                        throw new ValueError(\"The axis is not within the rank of the tensor \" +\r\n                            (\"\" + axis));\r\n                }\r\n            case 3:\r\n                switch (axis) {\r\n                    case 1:\r\n                        return sliceAlongFirstAxis(array, start, size);\r\n                    case 2:\r\n                        return tfc.slice3d(array, [0, start, 0], [array.shape[0], size, array.shape[2]]);\r\n                    case 3:\r\n                        return sliceAlongLastAxis(array, start, size);\r\n                    default:\r\n                        throw new ValueError(\"The axis is not within the rank of the tensor \" +\r\n                            (\"\" + axis));\r\n                }\r\n            case 4:\r\n                switch (axis) {\r\n                    case 1:\r\n                        return sliceAlongFirstAxis(array, start, size);\r\n                    case 2:\r\n                        return tfc.slice4d(array, [0, start, 0, 0], [array.shape[0], size, array.shape[2], array.shape[3]]);\r\n                    case 3:\r\n                        return tfc.slice4d(array, [0, 0, start, 0], [array.shape[0], array.shape[1], size, array.shape[3]]);\r\n                    case 4:\r\n                        return sliceAlongLastAxis(array, start, size);\r\n                    default:\r\n                        throw new ValueError(\"The axis is not within the rank of the tensor \" +\r\n                            (\"\" + axis));\r\n                }\r\n            default:\r\n                throw new ValueError(\"sliceAlongLastAxis() received an unsupported tensor rank: \" +\r\n                    (\"\" + array.rank));\r\n        }\r\n    });\r\n}\r\nexport function concatenate(tensors, axis) {\r\n    if (axis === void 0) { axis = -1; }\r\n    var rank;\r\n    if (axis < 0) {\r\n        rank = tensors[0].rank;\r\n        if (rank !== 0) {\r\n            axis = rank;\r\n        }\r\n        else {\r\n            axis = 0;\r\n        }\r\n    }\r\n    if (axis === tensors[0].rank) {\r\n        axis = -1;\r\n    }\r\n    return tfc.concat(tensors, axis);\r\n}\r\nexport function concatAlongFirstAxis(a, b) {\r\n    switch (a.rank) {\r\n        case 1:\r\n            return tfc.concat1d([a, b]);\r\n        case 2:\r\n            return tfc.concat2d([a, b], 0);\r\n        case 3:\r\n            return tfc.concat3d([a, b], 0);\r\n        case 4:\r\n            return tfc.concat4d([a, b], 0);\r\n        default:\r\n            throw new ValueError('concatAlongFirstAxis() received an unsupported tensor rank: ' +\r\n                a.rank);\r\n    }\r\n}\r\nexport function tile(x, n) {\r\n    if (!Array.isArray(n)) {\r\n        n = [n];\r\n    }\r\n    if (x.rank !== n.length) {\r\n        throw new ValueError(\"The length of input n (\" + n.length + \") does not match \" +\r\n            (\"the number of dimensions in input x (\" + x.rank + \")\"));\r\n    }\r\n    return tfc.tile(x, n);\r\n}\r\nexport function identity(x) {\r\n    return x.clone();\r\n}\r\nexport function eyeVariable(size, dtype, name) {\r\n    return new LayerVariable(tfc.eye(size, size, null, dtype), dtype, name);\r\n}\r\nexport function scalarTimesArray(c, x) {\r\n    return tfc.mul(c, x);\r\n}\r\nexport function scalarPlusArray(c, x) {\r\n    return tfc.add(c, x);\r\n}\r\nexport function randomNormal(shape, mean, stddev, dtype, seed) {\r\n    if (mean === void 0) { mean = 0.0; }\r\n    if (stddev === void 0) { stddev = 1.0; }\r\n    return tfc.randomNormal(shape, mean, stddev, dtype, seed);\r\n}\r\nexport function dot(x, y) {\r\n    if (y.rank !== 2) {\r\n        throw new NotImplementedError(\"dot support for y other than rank 2 is not yet implemented: \" +\r\n            (\"y shape = \" + shape));\r\n    }\r\n    else {\r\n        if (x.rank === 2) {\r\n            return tfc.matMul(x, y);\r\n        }\r\n        else if (x.rank === 3) {\r\n            var xShape0 = x.shape[0];\r\n            var xShape1 = x.shape[1];\r\n            var xShape2 = x.shape[2];\r\n            x = x.reshape([xShape0 * xShape1, xShape2]);\r\n            return tfc.matMul(x, y).reshape([\r\n                xShape0, xShape1, y.shape[1]\r\n            ]);\r\n        }\r\n        else {\r\n            throw new NotImplementedError(\"dot support for x of rank \" + x.rank + \" is not yet implemented: \" +\r\n                (\"x shape = \" + shape));\r\n        }\r\n    }\r\n}\r\nexport function sign(x) {\r\n    return tidy(function () {\r\n        var zerosLikeX = coreZerosLike(x);\r\n        var onesLikeX = coreOnesLike(x);\r\n        return where(tfc.equal(x, zerosLikeX), zerosLikeX, where(tfc.greater(x, coreZerosLike(x)), onesLikeX, scalarTimesArray(getScalar(-1), onesLikeX)));\r\n    });\r\n}\r\nexport function qr(x) {\r\n    var _a = tidy(function () {\r\n        if (x.shape.length !== 2) {\r\n            throw new ValueError(\"qr() requires a 2D Tensor, but got a \" + x.shape.length + \"D Tensor.\");\r\n        }\r\n        if (x.shape[0] < x.shape[1]) {\r\n            throw new ValueError(\"qr() requires x.shape[0] >= x.shape[1], but got shape: [\" + x.shape + \"]\");\r\n        }\r\n        var m = x.shape[0];\r\n        var n = x.shape[1];\r\n        var q = tfc.eye(m);\r\n        var r = x.clone();\r\n        var one2D = tensor2d([[1]], [1, 1]);\r\n        var w = one2D.clone();\r\n        var _loop_1 = function (j) {\r\n            var rTemp = r;\r\n            var wTemp = w;\r\n            var qTemp = q;\r\n            _a = tidy(function () {\r\n                var rjEnd1 = r.slice([j, j], [m - j, 1]);\r\n                var normX = tfc.norm(rjEnd1);\r\n                var rjj = r.slice([j, j], [1, 1]);\r\n                var s = tfc.neg(sign(rjj));\r\n                var u1 = rjj.sub(tfc.mul(s, normX));\r\n                var wPre = tfc.div(rjEnd1, u1);\r\n                if (wPre.shape[0] === 1) {\r\n                    w = one2D.clone();\r\n                }\r\n                else {\r\n                    w = one2D.concat(wPre.slice([1, 0], [wPre.shape[0] - 1, wPre.shape[1]]), 0);\r\n                }\r\n                var tau = tfc.neg(tfc.div(tfc.matMul(s, u1), normX));\r\n                var rjEndAll = r.slice([j, 0], [m - j, n]);\r\n                var tauTimesW = tau.mul(w);\r\n                if (j === 0) {\r\n                    r = rjEndAll.sub(tauTimesW.matMul(w.transpose().matMul(rjEndAll)));\r\n                }\r\n                else {\r\n                    r = r.slice([0, 0], [j, n])\r\n                        .concat(rjEndAll.sub(tauTimesW.matMul(w.transpose().matMul(rjEndAll))), 0);\r\n                }\r\n                var qAllJEnd = q.slice([0, j], [m, q.shape[1] - j]);\r\n                if (j === 0) {\r\n                    q = qAllJEnd.sub(qAllJEnd.matMul(w).matMul(tauTimesW.transpose()));\r\n                }\r\n                else {\r\n                    q = q.slice([0, 0], [m, j])\r\n                        .concat(qAllJEnd.sub(qAllJEnd.matMul(w).matMul(tauTimesW.transpose())), 1);\r\n                }\r\n                return [w, r, q];\r\n            }), w = _a[0], r = _a[1], q = _a[2];\r\n            dispose([rTemp, wTemp, qTemp]);\r\n            var _a;\r\n        };\r\n        for (var j = 0; j < n; ++j) {\r\n            _loop_1(j);\r\n        }\r\n        return [q, r];\r\n    }), qOuter = _a[0], rOuter = _a[1];\r\n    return [qOuter, rOuter];\r\n}\r\nexport function oneHot(indices, numClasses) {\r\n    return tidy(function () {\r\n        if (indices.rank !== 1) {\r\n            throw new Error('Only 1D one-hot tensors are supported in the ' +\r\n                'deeplearn backend, at present.');\r\n        }\r\n        indices = indices.toInt();\r\n        return tfc.oneHot(indices, numClasses).toFloat();\r\n    });\r\n}\r\nexport function gather(reference, indices, axis) {\r\n    return tidy(function () {\r\n        if (Array.isArray(indices)) {\r\n            indices = tensor1d(indices, 'int32');\r\n        }\r\n        else {\r\n            indices = indices.toInt();\r\n        }\r\n        return tfc.gather(reference, indices, axis);\r\n    });\r\n}\r\nexport function square(x) {\r\n    return tfc.mulStrict(x, x);\r\n}\r\nexport function pow(x, a) {\r\n    return tidy(function () {\r\n        if (typeof (a) === 'number') {\r\n            a = scalar(Math.round(a), 'int32');\r\n        }\r\n        if (a.dtype !== 'int32') {\r\n            throw new NotImplementedError(\"Non-int32 dtype (\" + a.dtype + \") is not supported by pow() yet\");\r\n        }\r\n        return tfc.pow(x, a);\r\n    });\r\n}\r\nexport function biasAdd(x, bias, dataFormat) {\r\n    return tidy(function () {\r\n        if (dataFormat == null) {\r\n            dataFormat = imageDataFormat();\r\n        }\r\n        checkDataFormat(dataFormat);\r\n        if (bias.rank !== 1 && bias.rank !== x.rank) {\r\n            throw new ValueError('Unexpected bias dimensions: ' + bias.rank +\r\n                '; expected it to be 1 or ' + x.rank);\r\n        }\r\n        var biasShape = bias.shape;\r\n        var y;\r\n        if (x.rank === 5) {\r\n            if (dataFormat === 'channelsFirst') {\r\n                if (biasShape.length === 1) {\r\n                    y = x.add(bias.reshape([1, biasShape[0], 1, 1, 1]));\r\n                }\r\n                else {\r\n                    y = x.add(bias.reshape([1, biasShape[3], biasShape[0], biasShape[1], biasShape[2]]));\r\n                }\r\n            }\r\n            else if (dataFormat === 'channelsLast') {\r\n                if (biasShape.length === 1) {\r\n                    y = x.add(bias.reshape([1, 1, 1, 1, biasShape[0]]));\r\n                }\r\n                else {\r\n                    y = x.add(bias.reshape([1].concat(biasShape)));\r\n                }\r\n            }\r\n        }\r\n        else if (x.rank === 4) {\r\n            if (dataFormat === 'channelsFirst') {\r\n                if (biasShape.length === 1) {\r\n                    y = x.add(bias.reshape([1, biasShape[0], 1, 1]));\r\n                }\r\n                else {\r\n                    y = x.add(bias.reshape([1, biasShape[2], biasShape[0], biasShape[1]]));\r\n                }\r\n            }\r\n            else if (dataFormat === 'channelsLast') {\r\n                if (biasShape.length === 1) {\r\n                    y = x.add(bias.reshape([1, 1, 1, biasShape[0]]));\r\n                }\r\n                else {\r\n                    y = x.add(bias.reshape([1].concat(biasShape)));\r\n                }\r\n            }\r\n        }\r\n        else if (x.rank === 3) {\r\n            if (dataFormat === 'channelsFirst') {\r\n                if (biasShape.length === 1) {\r\n                    y = x.add(bias.reshape([1, biasShape[0], 1]));\r\n                }\r\n                else {\r\n                    y = x.add(bias.reshape([1, biasShape[1], biasShape[0]]));\r\n                }\r\n            }\r\n            else if (dataFormat === 'channelsLast') {\r\n                if (biasShape.length === 1) {\r\n                    y = x.add(bias.reshape([1, 1, biasShape[0]]));\r\n                }\r\n                else {\r\n                    y = x.add(bias.reshape([1].concat(biasShape)));\r\n                }\r\n            }\r\n        }\r\n        else if (x.rank < 3) {\r\n            y = x.add(bias);\r\n        }\r\n        else {\r\n            throw new ValueError(\"Unsupported input rank by biasAdd: \" + x.rank);\r\n        }\r\n        return y;\r\n    });\r\n}\r\nexport function elu(x, alpha) {\r\n    if (alpha === void 0) { alpha = 1; }\r\n    if (alpha !== 1) {\r\n        throw new NotImplementedError(\"Support for alpha values other than 1 (\" + alpha + \") is not implemented \" +\r\n            \"yet.\");\r\n    }\r\n    return tfc.elu(x);\r\n}\r\nexport function softsign(x) {\r\n    return tidy(function () { return tfc.div(x, tfc.add(getScalar(1), tfc.abs(x))); });\r\n}\r\nexport function dropout(x, level, noiseShape, seed) {\r\n    return tidy(function () {\r\n        if (noiseShape != null && !util.arraysEqual(x.shape, noiseShape)) {\r\n            throw new NotImplementedError('Non-default noise shape is not implemented yet: ' +\r\n                JSON.stringify(noiseShape));\r\n        }\r\n        if (seed != null) {\r\n            throw new NotImplementedError('seed is not implemented for dropout yet.');\r\n        }\r\n        var multiplier = tfc.step(tfc.add(tfc.neg(level), tfc.randomUniform(x.shape, 0, 1, 'float32')));\r\n        multiplier = tfc.mul(tfc.div(getScalar(1), tfc.sub(getScalar(1), level)), multiplier);\r\n        return tfc.mul(x, multiplier);\r\n    });\r\n}\r\nexport function nameScope(name, fn) {\r\n    return commonNameScope(name, fn);\r\n}\r\nexport function floatx() {\r\n    return 'float32';\r\n}\r\nvar _uidPrefixes = {};\r\nexport function getUid(prefix) {\r\n    if (prefix === void 0) { prefix = ''; }\r\n    if (!(prefix in _uidPrefixes)) {\r\n        _uidPrefixes[prefix] = 0;\r\n    }\r\n    _uidPrefixes[prefix] += 1;\r\n    return prefix + _uidPrefixes[prefix].toString();\r\n}\r\nexport function hardSigmoid(x) {\r\n    return tidy(function () {\r\n        var y = scalarPlusArray(getScalar(0.5), scalarTimesArray(getScalar(0.2), x));\r\n        return tfc.clipByValue(y, 0, 1);\r\n    });\r\n}\r\nexport function inTrainPhase(x, alt, training) {\r\n    if (training === void 0) { training = false; }\r\n    return training ? x() : alt();\r\n}\r\nexport function gradients(lossFn, variables) {\r\n    var variableList = variables.map(function (variable) { return variable.read(); });\r\n    var valudAndGrads = variableGrads(lossFn, variableList);\r\n    return variables.map(function (variable) { return valudAndGrads.grads[variable.name]; });\r\n}\r\n//# sourceMappingURL=tfjs_backend.js.map","map":"{\"version\":3,\"file\":\"tfjs_backend.js\",\"sourceRoot\":\"\",\"sources\":[\"../src/backend/tfjs_backend.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/usr/local/google/home/smilkov/code/tfjs-layers/backend/tfjs_backend.d.ts","text":"import { DataType, Scalar, Tensor, Tensor1D, Tensor2D } from '@tensorflow/tfjs-core';\r\nimport { DataFormat } from '../common';\r\nimport { Shape, SymbolicTensor } from '../types';\r\nimport { LayerVariable } from '../variables';\r\nimport { epsilon as common_epsilon } from './common';\r\nexport declare function disposeScalarCache(): void;\r\nexport declare function setBackend(requestedBackend: 'cpu' | 'webgl'): void;\r\nexport declare function getBackend(): 'cpu' | 'webgl';\r\nexport declare function getScalar(value: number, dtype?: DataType): Scalar;\r\nexport declare const epsilon: typeof common_epsilon;\r\nexport declare function isBackendSymbolic(): boolean;\r\nexport declare function shape(x: Tensor | SymbolicTensor): Shape;\r\nexport declare function intShape(x: Tensor | SymbolicTensor): number[];\r\nexport declare function dtype(x: Tensor | SymbolicTensor): DataType;\r\nexport declare function countParams(x: Tensor | SymbolicTensor): number;\r\nexport declare function cast(x: Tensor, dtype: 'float32' | 'int32' | 'bool'): Tensor;\r\nexport declare function expandDims(x: Tensor, axis?: number): Tensor;\r\nexport declare function repeat(x: Tensor, n: number): Tensor;\r\nexport declare function flatten(x: Tensor): Tensor;\r\nexport declare function batchFlatten(x: Tensor): Tensor;\r\nexport declare function sliceAlongFirstAxis(array: Tensor, start: number, size: number): Tensor;\r\nexport declare function sliceAlongLastAxis(array: Tensor, start: number, size: number): Tensor;\r\nexport declare function sliceAlongAxis(array: Tensor, start: number, size: number, axis: number): Tensor;\r\nexport declare function concatenate(tensors: Tensor[], axis?: number): Tensor;\r\nexport declare function concatAlongFirstAxis(a: Tensor, b: Tensor): Tensor;\r\nexport declare function tile(x: Tensor, n: number | number[]): Tensor;\r\nexport declare function identity(x: Tensor): Tensor;\r\nexport declare function eyeVariable(size: number, dtype?: DataType, name?: string): LayerVariable;\r\nexport declare function scalarTimesArray(c: Scalar, x: Tensor): Tensor;\r\nexport declare function scalarPlusArray(c: Scalar, x: Tensor): Tensor;\r\nexport declare function randomNormal(shape: Shape, mean?: number, stddev?: number, dtype?: 'float32' | 'int32', seed?: number): Tensor;\r\nexport declare function dot(x: Tensor, y: Tensor): Tensor;\r\nexport declare function sign(x: Tensor): Tensor;\r\nexport declare function qr(x: Tensor2D): [Tensor, Tensor];\r\nexport declare function oneHot(indices: Tensor, numClasses: number): Tensor;\r\nexport declare function gather(reference: Tensor, indices: number[] | Tensor1D, axis?: number): Tensor;\r\nexport declare function square(x: Tensor): Tensor;\r\nexport declare function pow(x: Tensor, a: Tensor | number): Tensor;\r\nexport declare function biasAdd(x: Tensor, bias: Tensor, dataFormat?: DataFormat): Tensor;\r\nexport declare function elu(x: Tensor, alpha?: number): Tensor;\r\nexport declare function softsign(x: Tensor): Tensor;\r\nexport declare function dropout(x: Tensor, level: Scalar, noiseShape?: number[], seed?: number): Tensor;\r\nexport declare function nameScope<T>(name: string, fn: () => T): T;\r\nexport declare function floatx(): DataType;\r\nexport declare function getUid(prefix?: string): string;\r\nexport declare function hardSigmoid(x: Tensor): Tensor;\r\nexport declare function inTrainPhase<T>(x: () => T, alt: () => T, training?: boolean): T;\r\nexport declare function gradients(lossFn: () => Scalar, variables: LayerVariable[]): Tensor[];\r\n"}}
